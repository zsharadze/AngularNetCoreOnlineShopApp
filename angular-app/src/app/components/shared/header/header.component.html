<header class="header">
  <div class="d-flex justify-content-between">
    <div
      class="ms-2 d-flex justify-content-center align-self-center"
      role="button"
      (click)="navigateToMain()"
    >
      <img class="angular-icon" src="/assets/images/angular.png" />
      <h3 class="mt-2">Angular Online Shop</h3>
    </div>
<div>  
  <div *ngIf="router.url === '/'" class="input-group search-input-wrapper">
    <input class="form-control border-end-0 border rounded-pill shadow-none" type="search" id="search-input" placeholder="Search..." [ngModel]="searchText" (ngModelChange)='searchTextChanged.next($event)'>
    <span class="input-group-append ms-1">
        <button class="btn btn-outline-secondary search-btn bg-white border-start-0 border rounded-pill ms-n3" type="button" (click)="search()">
            <i class="fa fa-search"></i>
        </button>
    </span>
</div>
</div>
    <div class="p-2">
      <ul class="nav justify-content-end">
        <li class="nav-item" routerLink="/shoppingcart" title="Shopping cart">
          <i class="fa fa-shopping-cart me-3"
            ><span class="badge bg-danger">{{
              shoppingCartItemsCount > 0 ? shoppingCartItemsCount : ""
            }}</span></i
          >
        </li>
        <li class="nav-item" title="Administration">
          <i class="fa fa-wrench me-3" routerLink="/admin"></i>
        </li>
        <li class="nav-item">
          <div class="dropdown">
            <a
              id="dropdownMenuLink"
              href="#"
              role="button"
              data-bs-toggle="dropdown"
              aria-expanded="false"
            >
              <i class="fa fa-user-circle me-3"></i>
            </a>
            <ul
              class="dropdown-menu dropdown-menu-dark"
              aria-labelledby="dropdownMenuLink"
            >
              @if((authState$ | async)?.isAuthenticated){
              <li>
                <a class="dropdown-item">{{
                  (authState$ | async)?.userEmail
                }}</a>
              </li>
              <li *ngIf="(authState$ | async)?.isAuthenticated">
                <a class="dropdown-item" routerLink="/myorders">My orders</a>
              </li>
              <li><hr class="dropdown-divider" /></li>
              }
              <li *ngIf="!(authState$ | async)?.isAuthenticated">
                <a class="dropdown-item" routerLink="/auth/login">Sign in</a>
              </li>
              <li *ngIf="!(authState$ | async)?.isAuthenticated">
                <a class="dropdown-item" routerLink="/auth/register"
                  >Register</a
                >
              </li>
              <li *ngIf="(authState$ | async)?.isAuthenticated">
                <a class="dropdown-item" routerLink="/auth/changepassword"
                  >Change password</a
                >
              </li>
              <li *ngIf="(authState$ | async)?.isAuthenticated">
                <a class="dropdown-item" routerLink="/auth/logout">Sign out</a>
              </li>
            </ul>
          </div>
        </li>
      </ul>
    </div>
  </div>
</header>
